name=python-build
from_source=python-build
builddeps="base python python-installer python-setuptools"
deps="core-libs python-flit-core python-packaging python-pyproject-hooks"

build() {
    cp -rp "${source_dir}"/. ./

        PYTHONPATH="${source_dir}/src" \
    python -m build \
        --wheel \
        --no-isolation \
        --skip-dependency-check
}

package() {
    # XXX enable optimizations
    python -m installer \
        --destdir="${dest_dir}" \
        dist/*.whl
}
