name=python-flit-core
from_source=python-flit-core
builddeps="base p7zip python"
deps="core-libs python-setuptools"

build() {
    dist_dir="$(pwd -P)/dist"

    cp -rp "${source_dir}"/. ./
    cd flit_core

    python -m flit_core.wheel --outdir "${dist_dir}" .
}

package() {
    mkdir -p "${dest_dir}${prefix}/lib/python3.12/site-packages"
    cp -rp dist/*.whl "${dest_dir}${prefix}/lib/python3.12/site-packages"
    cd "${dest_dir}${prefix}/lib/python3.12/site-packages"
    7z x *.whl
}
