name=vim
from_source=vim
revision=1
builddeps="base"
deps="core-libs ncurses"

build() {
    cp -rp "${source_dir}"/. ./

        configure_script_path=./configure \
    autotools_configure \
        --disable-gtktest \
        --disable-icon-cache-update \
        --disable-desktop-database-update \
        --disable-canberra \
        --disable-selinux \
        --disable-xsmp \
        --disable-channel \
        --disable-netbeans \
        --enable-multibyte \
        --disable-acl \
        --disable-gpm \
        --disable-sysmouse \
        --disable-nls \
        --with-tlib=tinfo \
        --enable-gui=no \
        --without-x

    make -j${parallelism}
}

package() {
    DESTDIR="${dest_dir}" make install

    post_package_strip
}
