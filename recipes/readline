name=readline
from_source=readline
revision=1
hostdeps="gcc pkg-config"
deps="core-libs ncurses"

build() {
    autotools_configure_lib \
        --enable-multibyte \
        --with-curses

    make SHLIB_LIBS="-lncursesw" -j${parallelism}
}

package() {
    make SHLIB_LIBS="-lncursesw" install DESTDIR="${dest_dir}"

    ${OS_TRIPLET}-strip "${dest_dir}${prefix}"/lib/libhistory.so.8
    ${OS_TRIPLET}-strip "${dest_dir}${prefix}"/lib/libreadline.so.8
}
