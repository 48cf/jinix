name=glibc
from_source=glibc
revision=1
hostdeps="bootstrap-gcc"
deps="linux-headers"

build() {
    echo "slibdir=${prefix}/lib" >> configparms
    echo "rtlddir=${prefix}/lib" >> configparms
    echo "sbindir=${prefix}/bin" >> configparms
    echo "rootsbindir=${prefix}/bin" >> configparms

    autotools_configure_lib \
        --libdir=${prefix}/lib \
        --libexecdir=${prefix}/lib \
        --enable-kernel=4.4 \
        --with-headers=${sysroot}${prefix}/include \
        --disable-nscd

    make -j${parallelism}
}

package() {
    DESTDIR=${dest_dir} make install

    post_package_strip
}
