name=python-installer
from_source=python-installer
builddeps="base p7zip python python-flit-core"
deps="core-libs"

build() {
    dist_dir="$(pwd -P)/dist"

    python -m flit_core.wheel \
        --outdir "${dist_dir}" \
        "${source_dir}"
}

package() {
    mkdir -p "${dest_dir}${prefix}/lib/python3.12/site-packages"
    cp -rp dist/*.whl "${dest_dir}${prefix}/lib/python3.12/site-packages"
    cd "${dest_dir}${prefix}/lib/python3.12/site-packages"
    7z x *.whl
}
