name=python
from_source=python
revision=1
imagedeps="gcc"

build() {
    ${source_dir}/configure \
        --prefix="${prefix}" \
        --enable-shared \
        --without-ensurepip

    make -j${parallelism}
}

package() {
    DESTDIR="${dest_dir}" make install

    ln -sv python3 "${dest_dir}${prefix}/bin/python"

    post_package_strip
}
